const pluralize = require('pluralize');

module.exports = function(variables = {}) {
  const { name, state } = variables;

  const singularName = pluralize.singular(name);
  const pluralName = pluralize.plural(name);

  var fields;
  if (state) {
    original = Object.keys(state).map ( field => `    ${field}: ${JSON.stringify(state[field])},`).join("\n");
    fields = Object.keys(state).map( field => `    ${field}: ${JSON.stringify(state[field])},\n    ${field}HasError: false,\n    ${field}ErrorMsg:"",`).join("\n");
  }

  const data = state ?
`//Initial state from file (flag --state)
export default {
  original${singularName.capitalize()}: {\n${original}
  },
  ${pluralName}: null,
  error: null,
  isValid: false,
  isFetching: false,
  fields: {\n${fields}
  },
};
// This file was autogenerated by reducer-maker
` :
`// Initial state
export default {
  ${pluralName}: null,
  error: null,
  isValid: false,
  isFetching: false,
};
// This file was autogenerated by reducer-maker
`;

  return data;
}
