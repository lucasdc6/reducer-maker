const pluralize = require('pluralize');

module.exports = function(variables = {}) {
  const { name, directory, state } = variables;

  const singularName = pluralize.singular(name);
  const pluralName = pluralize.plural(name);

  var fields;
  if (state) {
    fields = Object.keys(state).map( field => `    "${field}": null,\n    "${field}HasError": false,\n    "${field}ErrorMsg":"",`).join("\n");
  }

  const data = state ?
`//Initial state from file (flag --state)
export default {
  "original${singularName.capitalize()}": ${JSON.stringify(state, null, '  ')},
  "${pluralName}": null,
  "error": null,
  "isValid": false,
  "isFetching": false,
  "fields": {\n${fields}
  },
};
// This file was autogenerated by reducer-maker
` :
`// Initial state
export default {
  ${pluralName}: null,
  error: null,
  isValid: false,
  isFetching: false,
};
// This file was autogenerated by reducer-maker
`;

  return data;
}
